<!DOCTYPE html>
<html>
<head th:replace="board :: head">
</head>
<body ng-app="board" ng-controller="boardController">
    <script th:inline="javascript">
        /*<![CDATA[*/
        boardApp.controller("boardController", function ($scope, $routeParams, $http, $timeout, $location, $sce) {
            $scope.boardId = /*[[${board.id}]]*/ "";
            console.log($scope.boardId);

            $scope.tinymceOptions = {
                plugins: 'link image code',
                toolbar: 'undo redo | bold italic | alignleft aligncenter alignright | code'
            };

            $scope.write = function () {
                console.log($scope.boardId);
                $http.post("write", {
                    title: $("#postTitle").val(),
                    text: $(tinymce.settings.selector).val()
                }).then(function (response) {
                    location.href = /*[[ @{'/board/' + ${board.id} + '?page=1'} ]]*/ "";
                    console.log(response);

                }, function (e) {
                    // error
                    console.log(e);
                });
            };
        });
        /*]]>*/
    </script>

    <div class="row">

        <div class="input-field col s12">
            <input id="postTitle" type="text" />
            <label for="postTitle" class="">제목</label>
        </div>

        <!--
        <div class="col s12">
            <i class="material-icons prefix">account_circle</i>
            <input id="postTitle" type="text" class="validate input-field" >
            <label for="icon_prefix">제목</label>
        </div>-->

        <div class="col s12">
            <textarea maxlength="65535" style="resize:none;height:300px;width:100%;" ui-tinymce="tinymceOptions" ng-model="tinymceModel" ng-change="updateHtml();"></textarea>
        </div>
        <!--
        <div class="input-field col s6">
            <i class="material-icons prefix">phone</i>
            <input id="icon_telephone" type="tel" class="validate">
            <label for="icon_telephone">Telephone</label>
        </div>
        -->
    </div>

    <div class="row">
        <div class="col s12 m4 l2" style="text-align:left;">
            <a th:onclick="'history.back();'" class="btn blue waves-effect">
                <i class="large material-icons">list</i>
            </a>
        </div>
        <div class="col s12 m4 l8">

        </div>
        <div class="col s12 m4 l2" style="text-align:right;">
            
            <a href="" ng-click="write();" class="btn blue waves-effect">
                <i class="large material-icons">mode_edit</i>
            </a>
        </div>
    </div>
</body>
</html>
